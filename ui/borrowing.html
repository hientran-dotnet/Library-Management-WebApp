<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mượn/Trả Sách - Thư Viện</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="assets/css/style.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#5e72e4',
                        secondary: '#8392ab',
                        success: '#2dce89',
                        info: '#11cdef',
                        warning: '#fb6340',
                        danger: '#f5365c',
                        dark: '#212529'
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-50">
    <!-- Sidebar -->
    <aside id="sidebar" class="fixed left-0 top-0 w-64 h-full bg-white shadow-lg transform -translate-x-full lg:translate-x-0 transition-transform duration-300 ease-in-out z-50">
        <div class="p-4 border-b">
            <h2 class="text-xl font-bold text-gray-800 flex items-center">
                <i class="fas fa-book text-primary mr-2"></i>
                Quản Lý Thư Viện
            </h2>
        </div>
        <nav class="mt-4">
            <ul class="space-y-1">
                <li>
                    <a href="index.html" class="flex items-center px-4 py-3 text-gray-700 hover:bg-primary hover:text-white transition-colors duration-200">
                        <i class="fas fa-tachometer-alt mr-3"></i>
                        Dashboard
                    </a>
                </li>
                <li>
                    <a href="books.html" class="flex items-center px-4 py-3 text-gray-700 hover:bg-primary hover:text-white transition-colors duration-200">
                        <i class="fas fa-book mr-3"></i>
                        Quản Lý Sách
                    </a>
                </li>
                <li>
                    <a href="members.html" class="flex items-center px-4 py-3 text-gray-700 hover:bg-primary hover:text-white transition-colors duration-200">
                        <i class="fas fa-users mr-3"></i>
                        Quản Lý Thành Viên
                    </a>
                </li>
                <li>
                    <a href="borrowing.html" class="flex items-center px-4 py-3 text-gray-700 hover:bg-primary hover:text-white transition-colors duration-200 bg-primary text-white">
                        <i class="fas fa-hand-holding mr-3"></i>
                        Mượn/Trả Sách
                    </a>
                </li>
                <li>
                    <a href="categories.html" class="flex items-center px-4 py-3 text-gray-700 hover:bg-primary hover:text-white transition-colors duration-200">
                        <i class="fas fa-tags mr-3"></i>
                        Danh Mục
                    </a>
                </li>
                <li>
                    <a href="reports.html" class="flex items-center px-4 py-3 text-gray-700 hover:bg-primary hover:text-white transition-colors duration-200">
                        <i class="fas fa-chart-bar mr-3"></i>
                        Báo Cáo
                    </a>
                </li>
                <li class="border-t pt-2 mt-4">
                    <a href="settings.html" class="flex items-center px-4 py-3 text-gray-700 hover:bg-primary hover:text-white transition-colors duration-200">
                        <i class="fas fa-cog mr-3"></i>
                        Cài Đặt
                    </a>
                </li>
                <li>
                    <a href="profile.html" class="flex items-center px-4 py-3 text-gray-700 hover:bg-primary hover:text-white transition-colors duration-200">
                        <i class="fas fa-user mr-3"></i>
                        Hồ Sơ
                    </a>
                </li>
            </ul>
        </nav>
    </aside>

    <!-- Main Content -->
    <div class="lg:ml-64 min-h-screen">
        <!-- Top Navigation -->
        <header class="bg-white shadow-sm border-b">
            <div class="flex items-center justify-between px-6 py-4">
                <div class="flex items-center">
                    <button id="menuToggle" class="lg:hidden text-gray-600 hover:text-gray-900 focus:outline-none">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                    <h1 class="text-xl font-semibold text-gray-800 ml-3 lg:ml-0">Mượn/Trả Sách</h1>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="relative hidden md:block">
                        <input type="text" placeholder="Tìm kiếm..." class="w-64 pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
                        <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                    </div>
                    <button class="relative text-gray-600 hover:text-gray-900 focus:outline-none">
                        <i class="fas fa-bell text-xl"></i>
                        <span class="absolute -top-1 -right-1 bg-danger text-white text-xs rounded-full h-5 w-5 flex items-center justify-center">3</span>
                    </button>
                    <div class="relative">
                        <button class="flex items-center text-gray-600 hover:text-gray-900 focus:outline-none">
                            <img class="h-8 w-8 rounded-full object-cover" src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80" alt="User">
                            <span class="ml-2 font-medium">Admin</span>
                            <i class="fas fa-chevron-down ml-1 text-sm"></i>
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Borrowing Management Content -->
        <main class="p-6">
            <!-- Quick Actions -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                <!-- Borrow Book Form -->
                <div class="bg-white rounded-lg shadow-sm p-6">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                        <i class="fas fa-hand-holding text-success mr-2"></i>
                        Mượn Sách
                    </h3>
                    <form class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Mã thành viên *</label>
                            <div class="relative">
                                <input type="text" id="memberCode" placeholder="Nhập mã thành viên..." class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
                                <i class="fas fa-user absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                            </div>
                            <div id="memberInfo" class="mt-2 p-2 bg-gray-50 rounded hidden">
                                <p class="text-sm text-gray-600">Thành viên: <span class="font-medium" id="memberName"></span></p>
                                <p class="text-sm text-gray-600">Loại: <span id="memberType"></span></p>
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ISBN hoặc mã sách *</label>
                            <div class="relative">
                                <input type="text" id="bookCode" placeholder="Quét mã vạch hoặc nhập ISBN..." class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
                                <i class="fas fa-barcode absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                            </div>
                            <div id="bookInfo" class="mt-2 p-2 bg-gray-50 rounded hidden">
                                <p class="text-sm text-gray-600">Sách: <span class="font-medium" id="bookTitle"></span></p>
                                <p class="text-sm text-gray-600">Tác giả: <span id="bookAuthor"></span></p>
                                <p class="text-sm text-gray-600">Tình trạng: <span id="bookStatus"></span></p>
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Ngày trả dự kiến</label>
                            <input type="date" id="returnDate" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Ghi chú</label>
                            <textarea rows="2" placeholder="Ghi chú thêm..." class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"></textarea>
                        </div>
                        <button type="submit" class="w-full bg-success text-white py-2 px-4 rounded-lg hover:bg-success hover:bg-opacity-90 transition-colors duration-200 flex items-center justify-center">
                            <i class="fas fa-hand-holding mr-2"></i>
                            Xác Nhận Mượn
                        </button>
                    </form>
                </div>

                <!-- Return Book Form -->
                <div class="bg-white rounded-lg shadow-sm p-6">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                        <i class="fas fa-undo text-primary mr-2"></i>
                        Trả Sách
                    </h3>
                    <form class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Mã phiếu mượn *</label>
                            <div class="relative">
                                <input type="text" id="borrowCode" placeholder="Nhập mã phiếu mượn..." class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
                                <i class="fas fa-receipt absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                            </div>
                        </div>
                        <div id="borrowInfo" class="space-y-2 hidden">
                            <div class="p-3 bg-gray-50 rounded">
                                <p class="text-sm text-gray-600">Thành viên: <span class="font-medium" id="borrowMemberName"></span></p>
                                <p class="text-sm text-gray-600">Sách: <span class="font-medium" id="borrowBookTitle"></span></p>
                                <p class="text-sm text-gray-600">Ngày mượn: <span id="borrowDate"></span></p>
                                <p class="text-sm text-gray-600">Ngày hẹn trả: <span id="expectedReturnDate"></span></p>
                                <p class="text-sm">Trạng thái: <span id="borrowStatus" class="px-2 py-1 rounded-full text-xs font-medium"></span></p>
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Tình trạng sách khi trả</label>
                            <select class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
                                <option>Tốt</option>
                                <option>Hơi hỏng</option>
                                <option>Hỏng nặng</option>
                                <option>Mất</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Phí phạt (nếu có)</label>
                            <div class="relative">
                                <input type="number" placeholder="0" class="w-full pl-8 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
                                <span class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400">₫</span>
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Ghi chú</label>
                            <textarea rows="2" placeholder="Ghi chú về tình trạng sách..." class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"></textarea>
                        </div>
                        <button type="submit" class="w-full bg-primary text-white py-2 px-4 rounded-lg hover:bg-primary hover:bg-opacity-90 transition-colors duration-200 flex items-center justify-center">
                            <i class="fas fa-undo mr-2"></i>
                            Xác Nhận Trả
                        </button>
                    </form>
                </div>
            </div>

            <!-- Current Borrowings -->
            <div class="bg-white rounded-lg shadow-sm overflow-hidden mb-6">
                <div class="px-6 py-4 border-b flex items-center justify-between">
                    <h3 class="text-lg font-semibold text-gray-800">Sách Đang Mượn</h3>
                    <div class="flex items-center space-x-4">
                        <select class="border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary">
                            <option value="">Tất cả trạng thái</option>
                            <option value="normal">Bình thường</option>
                            <option value="overdue">Quá hạn</option>
                            <option value="due_soon">Sắp đến hạn</option>
                        </select>
                        <button class="bg-warning text-white px-4 py-2 rounded-lg hover:bg-warning hover:bg-opacity-90 transition-colors duration-200 text-sm flex items-center">
                            <i class="fas fa-bell mr-2"></i>
                            Nhắc nhở
                        </button>
                    </div>
                </div>
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Mã phiếu</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Thành viên</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Sách</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ngày mượn</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ngày hẹn trả</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Trạng thái</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Thao tác</th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200">
                            <tr class="hover:bg-gray-50">
                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">BOR001</td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="flex items-center">
                                        <img class="h-8 w-8 rounded-full object-cover" src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-1.2.1&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80" alt="Member">
                                        <div class="ml-3">
                                            <div class="text-sm font-medium text-gray-900">Nguyễn Văn A</div>
                                            <div class="text-sm text-gray-500">LIB001</div>
                                        </div>
                                    </div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="text-sm font-medium text-gray-900">Lập Trình Web với JavaScript</div>
                                    <div class="text-sm text-gray-500">978-0-123456-78-9</div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">15/07/2024</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">29/07/2024</td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-success bg-opacity-10 text-success">
                                        Bình thường
                                    </span>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                    <div class="flex space-x-2">
                                        <button class="text-primary hover:text-primary hover:opacity-80" title="Gia hạn">
                                            <i class="fas fa-clock"></i>
                                        </button>
                                        <button class="text-warning hover:text-warning hover:opacity-80" title="Nhắc nhở">
                                            <i class="fas fa-bell"></i>
                                        </button>
                                        <button class="text-success hover:text-success hover:opacity-80" title="Trả sách">
                                            <i class="fas fa-undo"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr class="hover:bg-gray-50">
                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">BOR002</td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="flex items-center">
                                        <img class="h-8 w-8 rounded-full object-cover" src="https://images.unsplash.com/photo-1494790108755-2616b612b786?ixlib=rb-1.2.1&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80" alt="Member">
                                        <div class="ml-3">
                                            <div class="text-sm font-medium text-gray-900">Trần Thị B</div>
                                            <div class="text-sm text-gray-500">LIB002</div>
                                        </div>
                                    </div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="text-sm font-medium text-gray-900">Cơ Sở Dữ Liệu</div>
                                    <div class="text-sm text-gray-500">978-0-987654-32-1</div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">20/07/2024</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">03/08/2024</td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-warning bg-opacity-10 text-warning">
                                        Sắp đến hạn
                                    </span>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                    <div class="flex space-x-2">
                                        <button class="text-primary hover:text-primary hover:opacity-80" title="Gia hạn">
                                            <i class="fas fa-clock"></i>
                                        </button>
                                        <button class="text-warning hover:text-warning hover:opacity-80" title="Nhắc nhở">
                                            <i class="fas fa-bell"></i>
                                        </button>
                                        <button class="text-success hover:text-success hover:opacity-80" title="Trả sách">
                                            <i class="fas fa-undo"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr class="hover:bg-gray-50">
                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">BOR003</td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="flex items-center">
                                        <img class="h-8 w-8 rounded-full object-cover" src="https://images.unsplash.com/photo-1519244703995-f4e0f30006d5?ixlib=rb-1.2.1&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80" alt="Member">
                                        <div class="ml-3">
                                            <div class="text-sm font-medium text-gray-900">Lê Văn C</div>
                                            <div class="text-sm text-gray-500">LIB003</div>
                                        </div>
                                    </div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="text-sm font-medium text-gray-900">Toán Học Ứng Dụng</div>
                                    <div class="text-sm text-gray-500">978-0-555666-77-8</div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">10/07/2024</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">24/07/2024</td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-danger bg-opacity-10 text-danger">
                                        Quá hạn
                                    </span>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                    <div class="flex space-x-2">
                                        <button class="text-primary hover:text-primary hover:opacity-80" title="Gia hạn">
                                            <i class="fas fa-clock"></i>
                                        </button>
                                        <button class="text-warning hover:text-warning hover:opacity-80" title="Nhắc nhở">
                                            <i class="fas fa-bell"></i>
                                        </button>
                                        <button class="text-success hover:text-success hover:opacity-80" title="Trả sách">
                                            <i class="fas fa-undo"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <!-- Pagination -->
                <div class="bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6">
                    <div class="flex-1 flex justify-between sm:hidden">
                        <button class="relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50">
                            Trước
                        </button>
                        <button class="ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50">
                            Sau
                        </button>
                    </div>
                    <div class="hidden sm:flex-1 sm:flex sm:items-center sm:justify-between">
                        <div>
                            <p class="text-sm text-gray-700">
                                Hiển thị <span class="font-medium">1</span> đến <span class="font-medium">10</span> của
                                <span class="font-medium">234</span> kết quả
                            </p>
                        </div>
                        <div>
                            <nav class="relative z-0 inline-flex rounded-md shadow-sm -space-x-px" aria-label="Pagination">
                                <button class="relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50">
                                    <i class="fas fa-chevron-left"></i>
                                </button>
                                <button class="bg-primary border-primary text-white relative inline-flex items-center px-4 py-2 border text-sm font-medium">
                                    1
                                </button>
                                <button class="bg-white border-gray-300 text-gray-500 hover:bg-gray-50 relative inline-flex items-center px-4 py-2 border text-sm font-medium">
                                    2
                                </button>
                                <button class="bg-white border-gray-300 text-gray-500 hover:bg-gray-50 relative inline-flex items-center px-4 py-2 border text-sm font-medium">
                                    3
                                </button>
                                <button class="relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50">
                                    <i class="fas fa-chevron-right"></i>
                                </button>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Mobile Sidebar Overlay -->
    <div id="overlay" class="fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden hidden"></div>

    <!-- JavaScript -->
    <script src="assets/js/main.js"></script>
    <script>
        // Set default return date (14 days from today)
        document.addEventListener('DOMContentLoaded', function() {
            const returnDateInput = document.getElementById('returnDate');
            const today = new Date();
            const defaultReturnDate = new Date(today.getTime() + (14 * 24 * 60 * 60 * 1000));
            returnDateInput.value = defaultReturnDate.toISOString().split('T')[0];
        });

        // Mock data for demonstration
        const mockMembers = {
            'LIB001': { name: 'Nguyễn Văn A', type: 'Sinh viên' },
            'LIB002': { name: 'Trần Thị B', type: 'Giảng viên' },
            'LIB003': { name: 'Lê Văn C', type: 'Nhân viên' }
        };

        const mockBooks = {
            '978-0-123456-78-9': { title: 'Lập Trình Web với JavaScript', author: 'Nguyễn Văn A', status: 'Có sẵn' },
            '978-0-987654-32-1': { title: 'Cơ Sở Dữ Liệu', author: 'Trần Thị B', status: 'Có sẵn' },
            '978-0-555666-77-8': { title: 'Toán Học Ứng Dụng', author: 'Lê Văn C', status: 'Có sẵn' }
        };

        const mockBorrowings = {
            'BOR001': {
                memberName: 'Nguyễn Văn A',
                bookTitle: 'Lập Trình Web với JavaScript',
                borrowDate: '15/07/2024',
                expectedReturnDate: '29/07/2024',
                status: 'Bình thường'
            },
            'BOR002': {
                memberName: 'Trần Thị B',
                bookTitle: 'Cơ Sở Dữ Liệu',
                borrowDate: '20/07/2024',
                expectedReturnDate: '03/08/2024',
                status: 'Sắp đến hạn'
            }
        };

        // Member lookup
        document.getElementById('memberCode').addEventListener('blur', function() {
            const code = this.value.trim();
            const memberInfo = document.getElementById('memberInfo');
            const memberName = document.getElementById('memberName');
            const memberType = document.getElementById('memberType');

            if (mockMembers[code]) {
                memberName.textContent = mockMembers[code].name;
                memberType.textContent = mockMembers[code].type;
                memberInfo.classList.remove('hidden');
            } else {
                memberInfo.classList.add('hidden');
            }
        });

        // Book lookup
        document.getElementById('bookCode').addEventListener('blur', function() {
            const code = this.value.trim();
            const bookInfo = document.getElementById('bookInfo');
            const bookTitle = document.getElementById('bookTitle');
            const bookAuthor = document.getElementById('bookAuthor');
            const bookStatus = document.getElementById('bookStatus');

            if (mockBooks[code]) {
                bookTitle.textContent = mockBooks[code].title;
                bookAuthor.textContent = mockBooks[code].author;
                bookStatus.textContent = mockBooks[code].status;
                bookInfo.classList.remove('hidden');
            } else {
                bookInfo.classList.add('hidden');
            }
        });

        // Borrow lookup
        document.getElementById('borrowCode').addEventListener('blur', function() {
            const code = this.value.trim();
            const borrowInfo = document.getElementById('borrowInfo');
            const borrowMemberName = document.getElementById('borrowMemberName');
            const borrowBookTitle = document.getElementById('borrowBookTitle');
            const borrowDate = document.getElementById('borrowDate');
            const expectedReturnDate = document.getElementById('expectedReturnDate');
            const borrowStatus = document.getElementById('borrowStatus');

            if (mockBorrowings[code]) {
                const borrow = mockBorrowings[code];
                borrowMemberName.textContent = borrow.memberName;
                borrowBookTitle.textContent = borrow.bookTitle;
                borrowDate.textContent = borrow.borrowDate;
                expectedReturnDate.textContent = borrow.expectedReturnDate;
                borrowStatus.textContent = borrow.status;
                borrowStatus.className = `px-2 py-1 rounded-full text-xs font-medium ${getStatusClass(borrow.status)}`;
                borrowInfo.classList.remove('hidden');
            } else {
                borrowInfo.classList.add('hidden');
            }
        });

        function getStatusClass(status) {
            switch (status) {
                case 'Bình thường':
                    return 'bg-success bg-opacity-10 text-success';
                case 'Sắp đến hạn':
                    return 'bg-warning bg-opacity-10 text-warning';
                case 'Quá hạn':
                    return 'bg-danger bg-opacity-10 text-danger';
                default:
                    return 'bg-gray-100 text-gray-800';
            }
        }
    </script>
</body>
</html>
